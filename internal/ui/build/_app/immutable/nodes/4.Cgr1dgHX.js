import{f as p,a as d,s as f,c as V}from"../chunks/Dg_GfARK.js";import{i as q}from"../chunks/D3wIc8OY.js";import{p as z,o as B,a as C,g as a,m as S,b as c,s as v,c as e,r,d as O,t as R,f as D}from"../chunks/CnOP5lX7.js";import{i as k}from"../chunks/WVu9FrUV.js";import{p as T}from"../chunks/VBa0IDRg.js";import{w as F}from"../chunks/DcmPDSv3.js";var G=p('<div class="text-red-500"> </div>'),Q=p('<div class="space-y-4"><div class="space-y-2"><h2 class="text-lg font-semibold text-neutral-100">Key settings</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div class="border border-neutral-700 rounded p-3"><div class="text-sm text-neutral-400">Obsidian vault</div> <div class="text-neutral-100 break-all"> </div></div></div></div> <div class="space-y-2"><h3 class="text-md font-semibold text-neutral-100">Raw JSON</h3> <pre class="bg-neutral-800 text-neutral-100 p-3 rounded text-sm overflow-auto"> </pre></div></div>'),U=p('<div class="text-neutral-400">Loading settings…</div>'),X=p('<section class="space-y-4"><h1 class="text-2xl font-bold text-neutral-100">Settings</h1> <p class="text-neutral-400">App configuration loaded from server.</p> <!></section>');function et(J,N){z(N,!1);let i=S(null),o=S(null);const x="settings-page",P=()=>{const t=O(T).url.pathname,s=F.getWidgetState(t,x);s&&(c(i,s.settings),c(o,s.error))},W=()=>{const t=O(T).url.pathname;F.setWidgetState(t,x,{settings:a(i),error:a(o)})};B(async()=>{if(P(),!(a(i)!==null||a(o)!==null))try{const t=await fetch("/api/settings");if(!t.ok)throw new Error(`HTTP ${t.status}`);c(i,await t.json())}catch(t){c(o,t.message)}finally{W()}}),q();var g=X(),j=v(e(g),4);{var A=t=>{var s=G(),m=e(s);r(s),R(()=>f(m,`Failed to load settings: ${a(o)??""}`)),d(t,s)},E=t=>{var s=V(),m=D(s);{var H=l=>{var n=Q(),u=e(n),_=v(e(u),2),h=e(_),b=v(e(h),2),K=e(b,!0);r(b),r(h),r(_),r(u);var y=v(u,2),w=v(e(y),2),L=e(w,!0);r(w),r(y),r(n),R(M=>{f(K,a(i)?.Paths?.ObsidianVault??"—"),f(L,M)},[()=>JSON.stringify(a(i),null,2)]),d(l,n)},I=l=>{var n=U();d(l,n)};k(m,l=>{a(i)?l(H):l(I,!1)},!0)}d(t,s)};k(j,t=>{a(o)?t(A):t(E,!1)})}r(g),d(J,g),C()}export{et as component};

import{f as v,a as l,s as y,c as L}from"../chunks/CYfSSuN4.js";import{i as M}from"../chunks/DG6koc4w.js";import{p as V,o as q,c as z,f as a,m as k,j as g,s as f,d as e,i as r,k as S,t as b,l as B}from"../chunks/CgqYAJcN.js";import{i as O}from"../chunks/DNk-u1ix.js";import{p as P}from"../chunks/BeFktIXQ.js";import{w as R,C as F}from"../chunks/DwmjLiy8.js";import"../chunks/DfmFlSgd.js";var D=v('<div class="surface-solid p-5"><p class="text-sm font-medium text-red-400">Failed to load settings</p> <p class="mt-1 text-sm text-neutral-300"> </p></div>'),G=v('<div class="grid gap-3"><div class="surface-solid p-4"><div class="text-xs font-medium text-neutral-400">Obsidian vault</div> <div class="mt-1 break-all text-sm text-neutral-100"> </div></div></div>'),Q=v('<pre class="surface-solid max-h-112 overflow-auto p-4 text-xs text-neutral-100"> </pre>'),U=v('<div class="grid gap-4 lg:grid-cols-2"><!> <!></div>'),X=v('<div class="surface p-5 text-sm text-neutral-400">Loading settings…</div>'),Y=v('<section class="space-y-6"><div class="space-y-2"><h1 class="text-3xl font-semibold tracking-tight text-neutral-100">Settings</h1> <p class="text-sm text-neutral-400">App configuration loaded from server.</p></div> <!></section>');function ot(T,j){V(j,!1);let i=k(null),n=k(null);const w="settings-page",C=()=>{const t=S(P).url.pathname,s=R.getWidgetState(t,w);s&&(g(i,s.settings),g(n,s.error))},H=()=>{const t=S(P).url.pathname;R.setWidgetState(t,w,{settings:a(i),error:a(n)})};q(async()=>{if(C(),!(a(i)!==null||a(n)!==null))try{const t=await fetch("/api/settings");if(!t.ok)throw new Error(`HTTP ${t.status}`);g(i,await t.json())}catch(t){g(n,t.message)}finally{H()}}),M();var x=Y(),J=f(e(x),2);{var N=t=>{var s=D(),p=f(e(s),2),_=e(p,!0);r(p),r(s),b(()=>y(_,a(n))),l(t,s)},W=t=>{var s=L(),p=B(s);{var _=d=>{var c=U(),$=e(c);F($,{title:"Key settings",subtitle:"High-signal configuration values",children:(h,I)=>{var o=G(),u=e(o),m=f(e(u),2),K=e(m,!0);r(m),r(u),r(o),b(()=>y(K,a(i)?.Paths?.ObsidianVault??"—")),l(h,o)},$$slots:{default:!0}});var E=f($,2);F(E,{title:"Raw JSON",subtitle:"Full settings payload",children:(h,I)=>{var o=Q(),u=e(o,!0);r(o),b(m=>y(u,m),[()=>JSON.stringify(a(i),null,2)]),l(h,o)},$$slots:{default:!0}}),r(c),l(d,c)},A=d=>{var c=X();l(d,c)};O(p,d=>{a(i)?d(_):d(A,!1)},!0)}l(t,s)};O(J,t=>{a(n)?t(N):t(W,!1)})}r(x),l(T,x),z()}export{ot as component};

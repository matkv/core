import{F as A,G as L,H as S,I as k,J as I,K as R,h as p,M as B,O as U,P as Y,Q as F,n as x,R as C,T as $,U as G,V as H,W as Z,X as y,Y as j,Z as q,_ as O,m as z,$ as J,k as K,f as g,j as D,a0 as Q,a1 as V,a2 as W,a3 as X,a4 as ee,a5 as te,a6 as se,a7 as ae,a8 as re,a9 as ie,aa as ne,S as fe,ab as ue,C as ce,u as de,ac as oe,ad as _e}from"./CgqYAJcN.js";class le{anchor;#t=new Map;#s=new Map;#e=new Map;#a=new Set;#r=!0;constructor(t,a=!0){this.anchor=t,this.#r=a}#i=()=>{var t=A;if(this.#t.has(t)){var a=this.#t.get(t),e=this.#s.get(a);if(e)L(e),this.#a.delete(a);else{var i=this.#e.get(a);i&&(this.#s.set(a,i.effect),this.#e.delete(a),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),e=i.effect)}for(const[r,f]of this.#t){if(this.#t.delete(r),r===t)break;const n=this.#e.get(f);n&&(S(n.effect),this.#e.delete(f))}for(const[r,f]of this.#s){if(r===a||this.#a.has(r))continue;const n=()=>{if(Array.from(this.#t.values()).includes(r)){var d=document.createDocumentFragment();U(f,d),d.append(I()),this.#e.set(r,{effect:f,fragment:d})}else S(f);this.#a.delete(r),this.#s.delete(r)};this.#r||!e?(this.#a.add(r),k(f,n,!1)):n()}}};#n=t=>{this.#t.delete(t);const a=Array.from(this.#t.values());for(const[e,i]of this.#e)a.includes(e)||(S(i.effect),this.#e.delete(e))};ensure(t,a){var e=A,i=Y();if(a&&!this.#s.has(t)&&!this.#e.has(t))if(i){var r=document.createDocumentFragment(),f=I();r.append(f),this.#e.set(t,{effect:R(()=>a(f)),fragment:r})}else this.#s.set(t,R(()=>a(this.anchor)));if(this.#t.set(e,t),i){for(const[n,u]of this.#s)n===t?e.skipped_effects.delete(u):e.skipped_effects.add(u);for(const[n,u]of this.#e)n===t?e.skipped_effects.delete(u.effect):e.skipped_effects.add(u.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else p&&(this.anchor=B),this.#i()}}function be(s,t,a=!1){p&&x();var e=new le(s),i=a?C:0;function r(f,n){if(p){const d=$(s)===G;if(f===d){var u=H();Z(u),e.anchor=u,y(!1),e.ensure(f,n),y(!0);return}}e.ensure(f,n)}F(()=>{var f=!1;t((n,u=!0)=>{f=!0,r(u,n)}),f||r(!1,null)},i)}let b=!1,P=Symbol();function ge(s,t,a){const e=a[t]??={store:null,source:z(void 0),unsubscribe:O};if(e.store!==s&&!(P in a))if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=O;else{var i=!0;e.unsubscribe=J(s,r=>{i?e.source.v=r:D(e.source,r)}),i=!1}return s&&P in a?K(s):g(e.source)}function me(){const s={};function t(){j(()=>{for(var a in s)s[a].unsubscribe();q(s,P,{enumerable:!1,value:!0})})}return[s,t]}function he(s){var t=b;try{return b=!1,[s(),b]}finally{b=t}}function Se(s,t,a,e){var i=!ae||(a&re)!==0,r=(a&ie)!==0,f=(a&_e)!==0,n=e,u=!0,d=()=>(u&&(u=!1,n=f?de(e):e),n),_;if(r){var M=fe in s||ue in s;_=Q(s,t)?.set??(M&&t in s?c=>s[t]=c:void 0)}var l,E=!1;r?[l,E]=he(()=>s[t]):l=s[t],l===void 0&&e!==void 0&&(l=d(),_&&(i&&V(),_(l)));var o;if(i?o=()=>{var c=s[t];return c===void 0?d():(u=!0,c)}:o=()=>{var c=s[t];return c!==void 0&&(n=void 0),c===void 0?n:c},i&&(a&W)===0)return o;if(_){var N=s.$$legacy;return(function(c,v){return arguments.length>0?((!i||!v||N||E)&&_(v?o():c),c):o()})}var m=!1,h=((a&oe)!==0?ce:se)(()=>(m=!1,o()));r&&g(h);var w=ee;return(function(c,v){if(arguments.length>0){const T=v?g(h):i&&r?X(c):c;return D(h,T),m=!0,n!==void 0&&(n=T),c}return ne&&m||(w.f&te)!==0?h.v:g(h)})}export{le as B,ge as a,be as i,Se as p,me as s};
